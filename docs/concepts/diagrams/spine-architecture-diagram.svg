<svg id="spine-diagram" xmlns="http://www.w3.org/2000/svg" version="1.1"
     viewBox="-0.5 -0.5 1410 1119"
     style="background-color: rgb(255, 255, 255);">

    <!--

     Here is the list of marker CSS classes for the SVG image along with their meanings:

     * outer-frame — the outer frame of the whole image;
     * arrow-caption — a DIV with the caption over an arrow;
     * box-caption — a DIV with the caption in some container;
     * title-caption — a title;
     * rect — a `rect` element;
     * path — a `path` element;
     * arrow — an arrow;
     * layer-x — an X-th layer in stacked boxes such as 'Bounded Context';
     * border — a border;
     * brace - a brace.

    Elements and their parts:

     * bounded-context;
     * command-bus;
     * events;
     * event-store;
     * ui;
     * command-service;
     * query-service;
     * subscription-service;
     * stand;
     * event-bus;
     * system-context-top;
     * system-context-bottom;
     * command-dispatcher;
     * command-store;
     * aggregate-mirror;
     * pm-repo;
     * aggregate-repo;
     * projection-repo;
     * write-side;
     * read-side.


     Arrows, composed as "from-to":

     * command-dispatcher-pm-repo — an arrow from Command Dispatcher to PM repo group;
     * integration-events;
     * ui-command-service;
     * ui-query-service;
     * query-service-ui;
     * ui-subscription-service;
     * subscription-service-ui;
     * query-service-stand;
     * subscription-service-stand;
     * command-service-command-bus;
     * stand-query-service;
     * event-bus-event-store;
     * event-bus-projection-repo;
     * command-bus-command-dispatcher;
     * command-dispatcher-command-store;
     * stand-projection-repo;
     * stand-pm-repo;
     * stand-aggregate-mirror;
     * aggregate-states;
     * aggregate-mirror-stand;
     * stand-subscription-service;
     * aggregate-repo-aggregate-commands;
     * aggregate-repo-aggregate-events;
     * aggregate-event-bus;
     * event-bus-aggregate-repo;
     * pm-command-bus;
     * pm-repo-pm-commands;
     * pm-repo-pm-events;
     * pm-event-bus;
     * event-bus-pm-repo;
     * command-service-ui;
     * command-bus-command-service;
     * projection-repo-projection-events.

    The marker for elements facing to the framework end-users.

     * end-user.

     -->
    <defs/>
    <g class="diagram-content">
        <rect class="outer-frame end-user" x="0" y="2" width="1408" height="1115" fill-opacity="0.8"
              fill="#ffffff" stroke="none"
              pointer-events="none"/>
        <g class="g-caption bounded-context" pointer-events="all">
            <rect class="bounded-context rect layer-3 end-user" x="438" y="113" width="882"
                  height="990" fill="#fcfcfc" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="none"/>
            <rect class="bounded-context rect layer-2 end-user" x="424" y="101" width="882"
                  height="990" fill="#fcfcfc" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="none"/>
            <rect class="bounded-context rect layer-1 end-user" x="410" y="92" width="883"
                  height="987" fill="#ffffff" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="none"/>
            <g transform="translate(749.5,106)">
                <text x="100" y="28" fill="#666666" text-anchor="middle" font-size="26px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption bounded-context end-user">
                    Bounded Context
                </text>
            </g>
        </g>

        <g class="g-caption command-bus" pointer-events="all">
            <rect class="command-bus rect" x="460" y="149" width="53" height="423" rx="3.18"
                  ry="3.18" fill="#3399ff"
                  stroke="none" pointer-events="all"/>
            <g transform="translate(403.5,346.5)rotate(-90,82.5,14)">
                <text x="83" y="25" fill="#FFFFFF" text-anchor="middle" font-size="25px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption command-bus">
                    Command Bus
                </text>
            </g>
        </g>


        <rect class="ui rect end-user" x="121" y="92" width="56" height="1010" rx="3.36" ry="3.36"
              fill="#cda2be"
              stroke="none" pointer-events="none"/>
        <g transform="translate(69.5,582.5)rotate(-90,79,14)">
            <text x="79" y="27" fill="#FFFFFF" text-anchor="middle" font-size="25px"
                  pointer-events="all"
                  font-family="Helvetica" class="box-caption ui end-user">
                User Interface
            </text>
        </g>
        <g transform="translate(32.5,16.5)">
            <text x="132" y="34" fill="#BABABA" text-anchor="middle" font-size="32px"
                  pointer-events="all"
                  font-family="Helvetica" class="title-caption">
                Client Applications
            </text>
        </g>
        <g transform="translate(728.5,16.5)">
            <text x="125" y="34" fill="#BABABA" text-anchor="middle" font-size="32px"
                  pointer-events="all"
                  font-family="Helvetica" class="title-caption">
                Cloud Application
            </text>
        </g>
        <path class="arrow command-dispatcher-pm-repo"
              d="M 555 375 L 555.93 466 Q 556 476 566 475.83 L 581.53 475.57" fill="none"
              stroke="#0066cc" stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow command-dispatcher-pm-repo"
              d="M 591.53 475.41 L 581.59 478.91 L 581.47 472.24 Z" fill="#0066cc" stroke="#0066cc"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow integration-events"
              d="M 1283.47 77.06 Q 1297 50 1331.5 50 Q 1366 50 1366 81 Q 1366 112 1337.07 125.78"
              fill="none" stroke="#0066cc" stroke-width="4" stroke-miterlimit="10"
              pointer-events="none"/>

        <g class="g-arrow integration-events">
            <path class="arrow integration-events" d="M 1279 86 L 1280.49 75.57 L 1286.45 78.55 Z"
                  fill="#0066cc" stroke="#0066cc"
                  stroke-width="4" stroke-miterlimit="10" pointer-events="all"/>
            <path class="arrow integration-events"
                  d="M 1328.04 130.08 L 1335.63 122.77 L 1338.5 128.79 Z" fill="#0066cc"
                  stroke="#0066cc" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/>
            <g transform="translate(1330,80)"
               requiredFeatures="http://www.w3.org/Graphics/SVG/feature/1.2/#TextFlow">
                <text fill="#0066CC" text-anchor="middle" font-size="14px" font-family="Helvetica"
                      pointer-events="all"
                      class="arrow-caption integration-events">
                    <tspan x="0">Integration</tspan>
                    <tspan x="0" dy="1.2em">Events</tspan>
                </text>
            </g>
        </g>

        <g class="g-caption command-service" pointer-events="all">
            <rect class="command-service rect" x="286" y="149" width="53" height="190" rx="3.18"
                  ry="3.18" fill="#3399ff"
                  stroke="none" pointer-events="all"/>
            <g transform="translate(238.5,229.5)rotate(-90,74,14)">
                <text x="74" y="20" fill="#ffffff" text-anchor="middle" font-size="18px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption command-service">
                    Command Service
                </text>
            </g>
        </g>
        <g class="g-caption query-service" pointer-events="all">
            <rect class="query-service rect" x="286" y="639" width="53" height="190" rx="3.18"
                  ry="3.18" fill="#97d077"
                  stroke="none" pointer-events="all"/>
            <g transform="translate(255.5,719.5)rotate(-90,57,14)">
                <text x="57" y="20" fill="#FFFFFF" text-anchor="middle" font-size="18px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption query-service">
                    Query Service
                </text>
            </g>
        </g>
        <g class="g-caption subscription-service" pointer-events="all">
            <rect class="subscription-service rect" x="286" y="872.18" width="53" height="190"
                  rx="3.18" ry="3.18" fill="#97d077"
                  stroke="none" pointer-events="all"/>
            <g transform="translate(230.5,952.5)rotate(-90,82,14)">
                <text x="82" y="20" fill="#FFFFFF" text-anchor="middle" font-size="18px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption subscription-service">
                    Subscription Service
                </text>
            </g>
        </g>

        <g class="g-arrow ui-command-service" pointer-events="all">
            <path class="arrow ui-command-service end-user" d="M 175.86 217 L 269.53 217"
                  fill="none" stroke="#0066cc" stroke-width="4"
                  stroke-miterlimit="10" pointer-events="all"/>
            <path class="arrow ui-command-service end-user"
                  d="M 279.53 217 L 269.53 220.33 L 269.53 213.67 Z" fill="#0066cc" stroke="#0066cc"
                  stroke-width="4" stroke-miterlimit="10" pointer-events="all"/>
            <g transform="translate(187.5,196.5)">
                <text x="36" y="14" fill="#0066CC" text-anchor="middle" font-size="14px"
                      pointer-events="all"
                      font-family="Helvetica" class="arrow-caption ui-command-service end-user">
                    Commands
                </text>
            </g>
        </g>

        <g class="g-arrow ui-query-service" pointer-events="all">
            <path class="arrow ui-query-service end-user" d="M 176.21 713.76 L 270.53 713.1"
                  fill="none" stroke="#82b366" stroke-width="4"
                  stroke-miterlimit="10" pointer-events="all"/>
            <path class="arrow ui-query-service end-user"
                  d="M 280.53 713.03 L 270.55 716.43 L 270.51 709.77 Z" fill="#82b366"
                  stroke="#82b366"
                  stroke-width="4" stroke-miterlimit="10" pointer-events="all"/>
            <g transform="translate(202.5,692.5)">
                <text x="25" y="14" fill="#009900" text-anchor="middle" font-size="14px"
                      pointer-events="all"
                      font-family="Helvetica" class="arrow-caption ui-query-service end-user">
                    Queries
                </text>
            </g>
        </g>

        <g class="g-arrow query-service-ui" pointer-events="all">

            <path class="arrow query-service-ui end-user" d="M 286 766 L 191.47 766" fill="none"
                  stroke="#82b366" stroke-width="4"
                  stroke-miterlimit="10" pointer-events="all"/>
            <path class="arrow query-service-ui end-user"
                  d="M 181.47 766 L 191.47 762.67 L 191.47 769.33 Z" fill="#82b366" stroke="#82b366"
                  stroke-width="4" stroke-miterlimit="10" pointer-events="all"/>
            <g transform="translate(204.5,742)">
                <text x="23" y="16" fill="#009900" text-anchor="middle" font-size="14px"
                      pointer-events="all"
                      font-family="Helvetica" class="arrow-caption query-service-ui end-user">
                    Results
                </text>
            </g>
        </g>

        <g class="g-arrow ui-subscription-service" pointer-events="all">
            <path class="arrow ui-subscription-service end-user"
                  d="M 177 942 L 245 942 Q 255 942 262.76 942 L 270.53 942" fill="none"
                  stroke="#82b366"
                  stroke-width="4" stroke-miterlimit="10" pointer-events="all"/>
            <path class="arrow ui-subscription-service end-user"
                  d="M 280.53 942 L 270.53 945.33 L 270.53 938.67 Z" fill="#82b366" stroke="#82b366"
                  stroke-width="4" stroke-miterlimit="10" pointer-events="all"/>
            <g transform="translate(194.5,918)">
                <text x="32" y="16" fill="#009900" text-anchor="middle" font-size="14px"
                      pointer-events="all"
                      font-family="Helvetica"
                      class="arrow-caption ui-subscription-service end-user">
                    Subscribe
                </text>
            </g>
        </g>

        <g class="g-arrow subscription-service-ui" pointer-events="all">
            <path class="arrow subscription-service-ui end-user" d="M 286 987 L 185.24 987"
                  fill="none" stroke="#82b366" stroke-width="2"
                  stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="all"/>
            <path class="arrow subscription-service-ui end-user"
                  d="M 179.24 987 L 187.24 984.33 L 185.24 987 L 187.24 989.67 Z" fill="#82b366"
                  stroke="#82b366" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/>
            <g transform="translate(201.5,965.5)">
                <text x="27" y="14" fill="#009900" text-anchor="middle" font-size="14px"
                      pointer-events="all"
                      font-family="Helvetica"
                      class="arrow-caption subscription-service-ui end-user">
                    Updates
                </text>
            </g>
        </g>

        <g class="g-caption stand" pointer-events="all">
            <rect class="stand rect" x="460" y="639" width="53" height="423" rx="3.18" ry="3.18"
                  fill="#97d077"
                  stroke="none" pointer-events="all"/>
            <g transform="translate(453.5,836.5)rotate(-90,32.5,14)">
                <text x="33" y="25" fill="#FFFFFF" text-anchor="middle" font-size="25px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption stand">
                    Stand
                </text>
            </g>
        </g>
        <path class="arrow query-service-stand" d="M 339 713.76 L 443.53 713.76" fill="none"
              stroke="#82b366" stroke-width="4"
              stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow query-service-stand"
              d="M 453.53 713.76 L 443.53 717.09 L 443.53 710.43 Z" fill="#82b366" stroke="#82b366"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <path class="arrow subscription-service-stand" d="M 339 943.5 L 443.53 942.62" fill="none"
              stroke="#82b366" stroke-width="4"
              stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow subscription-service-stand"
              d="M 453.53 942.54 L 443.56 945.95 L 443.5 939.29 Z" fill="#82b366" stroke="#82b366"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <path class="arrow command-service-command-bus" d="M 339 217 L 443.53 217" fill="none"
              stroke="#0066cc" stroke-width="4"
              stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow command-service-command-bus"
              d="M 453.53 217 L 443.53 220.33 L 443.53 213.67 Z" fill="#0066cc" stroke="#0066cc"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <path class="arrow stand-query-service" d="M 458 766 L 353.47 766" fill="none"
              stroke="#82b366" stroke-width="4"
              stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow stand-query-service" d="M 343.47 766 L 353.47 762.67 L 353.47 769.33 Z"
              fill="#82b366" stroke="#82b366"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <path class="arrow event-bus-event-store" d="M 972.67 608.67 L 1021.53 608.67" fill="none"
              stroke="#ff8000" stroke-width="4"
              stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow event-bus-event-store"
              d="M 1031.53 608.67 L 1021.53 612 L 1021.53 605.33 Z" fill="#ff8000" stroke="#ff8000"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <path class="arrow event-bus-projection-repo" d="M 663 634 L 663 728.53" fill="none"
              stroke="#ff8000" stroke-width="4"
              stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow event-bus-projection-repo"
              d="M 663 738.53 L 659.67 728.53 L 666.33 728.53 Z" fill="#ff8000" stroke="#ff8000"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <rect class="rect system-context-top border" x="566" y="152" width="350" height="160"
              fill="none" stroke="#cfcfcf" stroke-width="2"
              stroke-dasharray="6 6" pointer-events="none"/>

        <path class="arrow command-bus-command-dispatcher" d="M 513 243 L 581.96 243" fill="none"
              stroke="#0066cc" stroke-width="4"
              stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow command-bus-command-dispatcher"
              d="M 591.96 243 L 581.96 246.33 L 581.96 239.67 Z" fill="#0066cc" stroke="#0066cc"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <g class="g-caption command-store" pointer-events="all">
            <path class="path command-store"
                  d="M 784.5 214.5 C 784.5 189.17 890.5 189.17 890.5 214.5 L 890.5 273.5 C 890.5 298.83 784.5 298.83 784.5 273.5 Z"
                  fill="#3399ff" stroke="#ffffff" stroke-width="2" stroke-miterlimit="10"
                  pointer-events="all"/>
            <path class="path command-store" d="M 784.5 214.5 C 784.5 233.5 890.5 233.5 890.5 214.5"
                  fill="none" stroke="#ffffff"
                  stroke-width="2" stroke-miterlimit="10" pointer-events="all"/>

            <g transform="translate(839,255)">
                <text x="0" y="0" fill="#FFFFFF" text-anchor="middle" font-size="16px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption command-store">
                    <tspan x="0">Command</tspan>
                    <tspan x="0" dy="1.2em">Store</tspan>
                </text>
            </g>
        </g>
        <rect class="rect command-dispatcher" x="596.5" y="206.5" width="140" height="75"
              fill="#3399ff" stroke="none"
              pointer-events="none"/>
        <g transform="translate(670,240)">
            <text x="0" y="0" fill="#FFFFFF" text-anchor="middle" font-size="16px"
                  pointer-events="all"
                  font-family="Helvetica" class="box-caption command-dispatcher">
                <tspan x="2">Command</tspan>
                <tspan x="0" dy="1.2em">Dispatcher</tspan>
            </text>
        </g>
        <path class="arrow command-dispatcher-command-store" d="M 736.43 243 L 769.96 243"
              fill="none" stroke="#0066cc" stroke-width="4"
              stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow command-dispatcher-command-store"
              d="M 779.96 243 L 769.96 246.33 L 769.96 239.67 Z" fill="#0066cc" stroke="#0066cc"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <g transform="translate(680.5,169.5)">
            <text x="56" y="17" fill="#999999" text-anchor="middle" font-size="16px"
                  pointer-events="all"
                  font-family="Helvetica" class="box-caption system-context-top">
                System Context
            </text>
        </g>
        <path class="arrow command-dispatcher-aggregate-repo"
              d="M 631.29 281.57 L 631.07 312 Q 631 322 621 322 L 565 322 Q 555 322 555 332 L 555 373 Q 555 383 565 382.93 L 579.53 382.82"
              fill="none" stroke="#0066cc" stroke-width="4" stroke-miterlimit="10"
              pointer-events="none"/>
        <path class="arrow command-dispatcher-aggregate-repo"
              d="M 589.53 382.75 L 579.55 386.15 L 579.5 379.49 Z" fill="#0066cc" stroke="#0066cc"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <rect class="rect system-context-bottom" x="566" y="888" width="350" height="150"
              fill="none" stroke="#cfcfcf" stroke-width="2"
              stroke-dasharray="6 6" pointer-events="none"/>

        <g class="g-caption aggregate-mirror" pointer-events="all">
            <rect class="rect aggregate-mirror" x="601" y="930" width="280" height="85"
                  fill="#97d077" stroke="none"
                  pointer-events="all"/>
            <g transform="translate(680.5,963.5)">
                <text x="60" y="17" fill="#FFFFFF" text-anchor="middle" font-size="16px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption aggregate-mirror">
                    Aggregate Mirror
                </text>
            </g>
        </g>
        <g transform="translate(684.5,900.5)">
            <text x="56" y="17" fill="#999999" text-anchor="middle" font-size="16px"
                  pointer-events="all"
                  font-family="Helvetica" class="box-caption system-context-bottom">
                System Context
            </text>
        </g>

        <g class="g-caption pm-repo" pointer-events="all">
            <rect class="rect pm-repo layer-3 end-user" x="604" y="455" width="319" height="101"
                  fill="#ffffff" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="all"/>
            <rect class="rect pm-repo layer-2 end-user" x="600" y="451.5" width="319" height="101"
                  fill="#ffffff" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="all"/>
            <rect class="rect pm-repo layer-1 end-user" x="596.5" y="447.5" width="319" height="101"
                  fill="#ffffff" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="all"/>

            <g transform="translate(660,484)">
                <text x="0" y="0" fill="#808080" text-anchor="middle" font-size="16px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption pm-repo end-user">
                    <tspan x="0">Process</tspan>
                    <tspan x="0" dy="1.2em">Manager</tspan>
                    <tspan x="0" dy="1.2em">Repository</tspan>
                </text>
            </g>
        </g>

        <g class="g-caption aggregate-repo" pointer-events="all">
            <rect class="rect aggregate-repo layer-3 end-user" x="605" y="339" width="319"
                  height="101" fill="#ffffff" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="all"/>
            <rect class="rect aggregate-repo layer-2 end-user" x="601" y="336" width="319"
                  height="101" fill="#ffffff" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="all"/>
            <rect class="rect aggregate-repo layer-1 end-user" x="597" y="332" width="319"
                  height="101" fill="#ffffff" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="all"/>

            <g transform="translate(660,380)">
                <text x="0" y="0" fill="#808080" text-anchor="middle" font-size="16px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption aggregate-repo end-user">
                    <tspan x="2">Aggregate</tspan>
                    <tspan x="0" dy="1.2em">Repository</tspan>
                </text>
            </g>
        </g>

        <g class="g-caption projection-repo" pointer-events="all">
            <rect class="rect projection-repo layer-3 end-user" x="607.5" y="751.5" width="319"
                  height="101" fill="#ffffff" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="all"/>
            <rect class="rect projection-repo layer-2 end-user" x="603" y="747.5" width="319"
                  height="101" fill="#ffffff" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="all"/>
            <rect class="rect projection-repo layer-1 end-user" x="598.5" y="743" width="319"
                  height="101" fill="#ffffff" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="all"/>

            <g transform="translate(660,790)">
                <text x="0" y="0" fill="#808080" text-anchor="middle" font-size="16px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption projection-repo end-user">
                    <tspan x="2">Projection</tspan>
                    <tspan x="0" dy="1.2em">Repository</tspan>
                </text>
            </g>
        </g>

        <path class="arrow stand-projection-repo" d="M 524.97 794 L 581.53 794" fill="none"
              stroke="#82b366" stroke-width="4"
              stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow stand-projection-repo"
              d="M 517.47 794 L 527.47 790.67 L 524.97 794 L 527.47 797.33 Z" fill="#82b366"
              stroke="#82b366" stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow stand-projection-repo" d="M 591.53 794 L 581.53 797.33 L 581.53 790.67 Z"
              fill="#82b366" stroke="#82b366"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <path class="arrow stand-projection-repo"
              d="M 524.78 756 L 546 756 Q 556 756 556 746 L 556 529 Q 556 519 566 519.08 L 579.53 519.18"
              fill="none" stroke="#82b366" stroke-width="4" stroke-miterlimit="10"
              pointer-events="none"/>
        <path class="arrow stand-pm-repo"
              d="M 517.28 756 L 527.28 752.67 L 524.78 756 L 527.28 759.33 Z" fill="#82b366"
              stroke="#82b366" stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow stand-pm-repo" d="M 589.53 519.25 L 579.5 522.51 L 579.55 515.84 Z"
              fill="#82b366" stroke="#82b366"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <path class="arrow stand-aggregate-mirror"
              d="M 587.5 956.69 L 566 956.9 Q 556 957 556 947 L 556 842 Q 556 832 546 832 L 527.76 832"
              fill="none" stroke="#82b366" stroke-width="4" stroke-miterlimit="10"
              pointer-events="none"/>
        <path class="arrow stand-aggregate-mirror"
              d="M 595 956.62 L 585.04 960.05 L 587.5 956.69 L 584.97 953.38 Z" fill="#82b366"
              stroke="#82b366" stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow stand-aggregate-mirror"
              d="M 517.76 832 L 527.76 828.67 L 527.76 835.33 Z" fill="#82b366" stroke="#82b366"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <g class="g-arrow aggregate-states" pointer-events="all">
            <path class="arrow aggregate-states"
                  d="M 886 365.33 L 1176 365.01 Q 1186 365 1186 375 L 1186 967 Q 1186 977 1176 977.05 L 892.9 978.61"
                  fill="none" stroke="#82b366" stroke-width="2" stroke-miterlimit="10"
                  stroke-dasharray="6 6" pointer-events="all"/>
            <path class="arrow aggregate-states"
                  d="M 884.9 978.65 L 892.89 975.94 L 892.92 981.28 Z" fill="#82b366"
                  stroke="#82b366"
                  stroke-width="2" stroke-miterlimit="10" pointer-events="all"/>
            <g transform="translate(1145,338)">
                <text x="0" y="0" fill="#009900" text-anchor="middle" font-size="14px"
                      pointer-events="all"
                      font-family="Helvetica" class="arrow-caption aggregate-states">
                    <tspan x="2">Aggregate</tspan>
                    <tspan x="0" dy="1.2em">States</tspan>
                </text>
            </g>
        </g>

        <g class="g-caption event-bus" pointer-events="all">
            <rect class="rect event-bus" x="758" y="421.5" width="53" height="373" rx="3.18"
                  ry="3.18" fill="#ffb366"
                  stroke="none" transform="rotate(90,784.5,608)" pointer-events="all"/>
            <g transform="translate(727.5,593.5)">
                <text x="57" y="25" fill="#FFFFFF" text-anchor="middle" font-size="25px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption event-bus">
                    Event Bus
                </text>
            </g>
        </g>

        <g class="g-caption event-store" pointer-events="all">
            <path class="event-store path"
                  d="M 1036 578 C 1036 551.33 1146 551.33 1146 578 L 1146 638 C 1146 664.67 1036 664.67 1036 638 Z"
                  fill="#ffb366" stroke="#ffffff" stroke-width="2" stroke-miterlimit="10"
                  pointer-events="all"/>
            <path class="event-store path" d="M 1036 578 C 1036 598 1146 598 1146 578" fill="none"
                  stroke="#ffffff"
                  stroke-width="2" stroke-miterlimit="10" pointer-events="all"/>
            <g transform="translate(1066.5,601.5)">
                <text x="24" y="23" fill="#FFFFFF" text-anchor="middle" font-size="16px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption event-store">
                    Event Store
                </text>
            </g>
        </g>

        <path class="arrow aggregate-mirror-stand" d="M 601 987 L 524.24 987" fill="none"
              stroke="#82b366" stroke-width="2"
              stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="none"/>
        <path class="arrow aggregate-mirror-stand"
              d="M 518.24 987 L 526.24 984.33 L 524.24 987 L 526.24 989.67 Z" fill="#82b366"
              stroke="#82b366" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/>

        <path class="arrow stand-subscription-service" d="M 460 987 L 347.89 987" fill="none"
              stroke="#82b366" stroke-width="2"
              stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="none"/>
        <path class="arrow stand-subscription-service"
              d="M 341.89 987 L 349.89 984.33 L 347.89 987 L 349.89 989.67 Z" fill="#82b366"
              stroke="#82b366" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/>

        <g transform="translate(960,950)">
            <text x="0" y="0" fill="#009900" text-anchor="middle" font-size="14px"
                  pointer-events="all"
                  font-family="Helvetica" class="arrow-caption aggregate-states">
                <tspan x="2">Aggregate</tspan>
                <tspan x="0" dy="1.2em">States</tspan>
            </text>
        </g>

        <path class="path write-side brace end-user"
              d="M 1251 122 L 1236.25 122 Q 1226.25 122 1226.25 132 L 1226.25 347 Q 1226.25 357 1216.25 357 L 1211.13 357 Q 1206 357 1216 357 L 1221.13 357 Q 1226.25 357 1226.25 367 L 1226.25 582 Q 1226.25 592 1236.25 592 L 1251 592"
              fill="none" stroke="#cfcfcf" stroke-width="3" stroke-miterlimit="10"
              transform="rotate(180,1228.5,357)" pointer-events="none"/>
        <path class="path read-side brace end-user"
              d="M 1251 612 L 1236.25 612 Q 1226.25 612 1226.25 622 L 1226.25 827 Q 1226.25 837 1216.25 837 L 1211.13 837 Q 1206 837 1216 837 L 1221.13 837 Q 1226.25 837 1226.25 847 L 1226.25 1052 Q 1226.25 1062 1236.25 1062 L 1251 1062"
              fill="none" stroke="#cfcfcf" stroke-width="3" stroke-miterlimit="10"
              transform="rotate(180,1228.5,837)" pointer-events="none"/>

        <g transform="translate(1217.5,351.5)rotate(-90,44.5,11)">
            <text x="45" y="21" fill="#CFCFCF" text-anchor="middle" font-size="20px"
                  pointer-events="all"
                  font-family="Helvetica" class="arrow-caption write-side end-user">
                Write-side
            </text>
        </g>
        <g transform="translate(1216.5,831.5)rotate(-90,45.5,11)">
            <text x="46" y="21" fill="#CFCFCF" text-anchor="middle" font-size="20px"
                  pointer-events="all"
                  font-family="Helvetica" class="arrow-caption read-side end-user">
                Read-side
            </text>
        </g>

        <g class="g-caption aggregate" pointer-events="all">
            <rect class="rect aggregate layer-3 end-user" x="791.39" y="357.5" width="93"
                  height="61" fill="#ffff99" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="all"/>
            <rect class="rect aggregate layer-2 end-user" x="787.39" y="353.5" width="93"
                  height="61" fill="#ffff99" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="all"/>
            <rect class="rect aggregate layer-1 end-user" x="783" y="349" width="93" height="61"
                  fill="#ffff99" stroke="#cfcfcf"
                  stroke-width="2" pointer-events="all"/>
            <g transform="translate(788.5,368.5)">
                <text x="39" y="17" fill="#808080" text-anchor="middle" font-size="16px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption aggregate end-user">
                    Aggregate
                </text>
            </g>
        </g>
        <path class="arrow aggregate-repo-aggregate-commands end-user"
              d="M 719 376.67 L 756 376.93 Q 766 377 766.28 377.02 L 766.56 377.04" fill="none"
              stroke="#0066cc" stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow aggregate-repo-aggregate-commands end-user"
              d="M 776.54 377.7 L 766.34 380.36 L 766.78 373.71 Z" fill="#0066cc" stroke="#0066cc"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <path class="arrow aggregate-event-bus"
              d="M 883.67 402.83 L 925 402.97 Q 935 403 934.97 413 L 934.54 564.19" fill="none"
              stroke="#ff8000" stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow aggregate-event-bus" d="M 934.51 574.19 L 931.21 564.19 L 937.87 564.2 Z"
              fill="#ff8000" stroke="#ff8000"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <g class="g-arrow event-bus-aggregate-repo" pointer-events="all">
            <path class="arrow event-bus-aggregate-repo"
                  d="M 949.33 581.83 L 949.02 395 Q 949 385 939.74 385.05 L 930.47 385.09"
                  fill="none"
                  stroke="#ff8000" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/>
            <path class="arrow event-bus-aggregate-repo"
                  d="M 920.47 385.14 L 930.45 381.76 L 930.49 388.43 Z" fill="#ff8000"
                  stroke="#ff8000"
                  stroke-width="4" stroke-miterlimit="10" pointer-events="all"/>
            <g transform="translate(958.5,405.5)">
                <text x="22" y="14" fill="#FF8000" text-anchor="middle" font-size="14px"
                      pointer-events="all"
                      font-family="Helvetica" class="arrow-caption event-bus-aggregate-repo">
                    Events
                </text>
            </g>
        </g>

        <path class="arrow aggregate-repo-aggregate-events end-user"
              d="M 719 391.67 L 756 391.93 Q 766 392 766.28 392.02 L 766.56 392.04" fill="none"
              stroke="#ff8000" stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow aggregate-repo-aggregate-events end-user"
              d="M 776.54 392.7 L 766.34 395.36 L 766.78 388.71 Z" fill="#ff8000" stroke="#ff8000"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <g class="g-caption pm" pointer-events="all">
            <rect class="rect pm layer-3 end-user" x="791.39" y="472.5" width="93" height="61"
                  fill="#ccccff" stroke="#9999ff"
                  stroke-width="2" pointer-events="all"/>
            <rect class="rect pm layer-2 end-user" x="787.39" y="468.5" width="93" height="61"
                  fill="#ccccff" stroke="#9999ff"
                  stroke-width="2" pointer-events="all"/>
            <rect class="rect pm layer-1 end-user" x="783" y="465" width="93" height="61"
                  fill="#ccccff" stroke="#9999ff"
                  stroke-width="2" pointer-events="all"/>

            <g transform="translate(830,492)">
                <text x="0" y="0" fill="#808080" text-anchor="middle" font-size="16px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption pm end-user">
                    <tspan x="2">Process</tspan>
                    <tspan x="0" dy="1.2em">Manager</tspan>
                </text>
            </g>
        </g>

        <path class="arrow pm-command-bus end-user"
              d="M 814.71 533 L 814.9 553 Q 815 563 805 563 L 636 563 Q 626 563 616 563 L 528.47 563"
              fill="none" stroke="#0066cc" stroke-width="4" stroke-miterlimit="10"
              pointer-events="none"/>
        <path class="arrow pm-command-bus end-user"
              d="M 518.47 563 L 528.47 559.67 L 528.47 566.33 Z" fill="#0066cc" stroke="#0066cc"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <path class="arrow pm-repo-pm-commands end-user"
              d="M 719 488.67 L 756 488.93 Q 766 489 766.28 489.02 L 766.56 489.04" fill="none"
              stroke="#0066cc" stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow pm-repo-pm-commands end-user"
              d="M 776.54 489.7 L 766.34 492.36 L 766.78 485.71 Z" fill="#0066cc" stroke="#0066cc"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <path class="arrow pm-repo-pm-events end-user"
              d="M 719 503.67 L 756 503.93 Q 766 504 766.28 504.02 L 766.56 504.04" fill="none"
              stroke="#ff8000" stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow pm-repo-pm-events end-user"
              d="M 776.54 504.7 L 766.34 507.36 L 766.78 500.71 Z" fill="#ff8000" stroke="#ff8000"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <path class="arrow pm-event-bus" d="M 843 533 L 843 565.53" fill="none" stroke="#ff8000"
              stroke-width="4"
              stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow pm-event-bus" d="M 843 575.53 L 839.67 565.53 L 846.33 565.53 Z"
              fill="#ff8000" stroke="#ff8000"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <path class="arrow event-bus-pm-repo" d="M 861 582 L 861 564.47" fill="none"
              stroke="#ff8000" stroke-width="4"
              stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow event-bus-pm-repo" d="M 861 554.47 L 864.33 564.47 L 857.67 564.47 Z"
              fill="#ff8000" stroke="#ff8000"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <g class="g-arrow command-service-ui" pointer-events="all">
            <path class="arrow command-service-ui end-user" d="M 286 271 L 192.47 271" fill="none"
                  stroke="#0066cc" stroke-width="4"
                  stroke-miterlimit="10" pointer-events="all"/>
            <path class="arrow command-service-ui end-user"
                  d="M 182.47 271 L 192.47 267.67 L 192.47 274.33 Z" fill="#0066cc" stroke="#0066cc"
                  stroke-width="4" stroke-miterlimit="10" pointer-events="all"/>
            <g transform="translate(216.5,250.5)">
                <text x="15" y="14" fill="#0066CC" text-anchor="middle" font-size="14px"
                      pointer-events="all"
                      font-family="Helvetica" class="arrow-caption command-service-ui end-user">
                    Acks
                </text>
            </g>
        </g>

        <path class="arrow command-bus-command-service" d="M 460 271 L 354.47 271" fill="none"
              stroke="#0066cc" stroke-width="4"
              stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow command-bus-command-service"
              d="M 344.47 271 L 354.47 267.67 L 354.47 274.33 Z" fill="#0066cc" stroke="#0066cc"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>

        <g class="g-caption projection" pointer-events="all">
            <rect class="rect projection layer-3 end-user" x="795.39" y="766.5" width="93"
                  height="61" fill="#97d077" stroke="#ffffff"
                  stroke-width="2" pointer-events="all"/>
            <rect class="rect projection layer-2 end-user" x="791.39" y="763.5" width="93"
                  height="61" fill="#97d077" stroke="#ffffff"
                  stroke-width="2" pointer-events="all"/>
            <rect class="rect projection layer-1 end-user" x="787.39" y="759.5" width="93"
                  height="61" fill="#97d077" stroke="#ffffff"
                  stroke-width="2" pointer-events="all"/>

            <g transform="translate(795.5,779.5)">
                <text x="36" y="17" fill="#FFFFFF" text-anchor="middle" font-size="16px"
                      pointer-events="all"
                      font-family="Helvetica" class="box-caption projection end-user">
                    Projection
                </text>
            </g>
        </g>
        <path class="arrow projection-repo-projection-events end-user" d="M 719 794 L 772.53 794"
              fill="none" stroke="#ff8000" stroke-width="4"
              stroke-miterlimit="10" pointer-events="none"/>
        <path class="arrow projection-repo-projection-events end-user"
              d="M 782.53 794 L 772.53 797.33 L 772.53 790.67 Z" fill="#ff8000" stroke="#ff8000"
              stroke-width="4" stroke-miterlimit="10" pointer-events="none"/>
    </g>
</svg>